{"version":3,"file":"vue-xdraggable.js","sources":["../src/xdraggable.vue","../src/install.js","../src/index.js"],"sourcesContent":["<template>\n    <div>\n        <slot ref=\"drag\"></slot>\n    </div>\n</template>\n<script>\nexport default {\n    props: {\n        move: {\n            type: String,\n            default: 'both'\n        },\n        randomPosition: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            left: null,\n            top:  null,\n            //元素到鼠标的距离\n            pos:{\n                x:null,\n                y:null\n            },\n            //桌子的宽高\n            desk:{\n                width:null,\n                height:null\n            },\n            //移动物体的宽高\n            animal:{\n                width:null,\n                height:null\n            },\n            status: {\n                dragging :false\n            }\n        };\n    },\n    watch: {\n        left(val) {\n            this.$el.style.left = val+'px';\n        },\n        top(val) {\n            this.$el.style.top = val+'px';\n        }\n    },\n    mounted() {\n        //初始化桌子的宽高\n        this.desk.width = this.$el.parentNode.clientWidth;\n        this.desk.height = this.$el.parentNode.clientHeight;\n        //初始化移动物的宽高\n        this.animal.width = this.$el.clientWidth;\n        this.animal.height = this.$el.clientHeight;\n        var handle = this.$el.querySelector('[handle]')?this.$el.querySelector('[handle]'):this.$el;\n        //初始化随机位置\n        if(this.randomPosition){\n            this.$el.style.left = Math.floor(Math.random()*(this.desk.width - this.animal.width))+'px';\n            this.$el.style.top = Math.floor(Math.random()*(this.desk.height - this.animal.height))+'px';\n        }\n        this.left = this.$el.offsetLeft;\n        this.top = this.$el.offsetTop;\n        handle.addEventListener('mousedown',(e)=>{\n            this.$emit('dragstart',e);\n            this.status.dragging = true;\n            this.pos.x = e.clientX - this.left;\n            this.pos.y = e.clientY - this.top;\n        });\n        document.addEventListener('mousemove',this.mousemoveObserver);\n        document.addEventListener('mouseup',this.mouseupObserver);\n    },\n    methods: {\n        mousemoveObserver(e) {\n            e.preventDefault();\n            if(this.status.dragging==true){\n                this.$emit('dragging',e);\n                if(this.move == 'x' || this.move == 'both'){\n                    var left = (e.clientX-this.pos.x)>0?(e.clientX-this.pos.x):0;\n                    if(left>(this.desk.width-this.animal.width)){\n                        left = this.desk.width-this.animal.width;\n                    }\n                    this.left = left;\n                }\n                if(this.move == 'y' || this.move == 'both'){\n                    var top = (e.clientY-this.pos.y)>0?(e.clientY-this.pos.y):0;\n                    if(top>(this.desk.height-this.animal.height)){\n                        top = this.desk.height-this.animal.height;\n                    }\n                    this.top = top;\n                }\n            }\n        },\n        mouseupObserver(e) {\n            if(this.status.dragging==true){\n                this.$emit('dragend',e);\n            }\n            this.status.dragging = false;\n        }\n    },\n    beforeDestroy() {\n        document.removeEventListener('mousemove',this.mousemoveObserver);\n        document.removeEventListener('mouseup',this.mouseupObserver);\n    }\n};\n</script>\n<style>\n\n</style>\n\n","import Xdraggable from './xdraggable.vue';\nvar state = false;\n\nexport default function (Vue) {\n    if (state) return;\n    state = true;\n    Vue.component('xdraggable', Xdraggable);\n}","import install from './install';\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n    install(window.Vue);\r\n}\r\n\r\nexport default install;"],"names":["String","Boolean","val","$el","style","left","top","desk","width","parentNode","clientWidth","height","clientHeight","animal","handle","querySelector","randomPosition","Math","floor","random","offsetLeft","offsetTop","addEventListener","e","$emit","status","dragging","pos","x","clientX","y","clientY","mousemoveObserver","mouseupObserver","preventDefault","move","removeEventListener","state","Vue","component","Xdraggable","window"],"mappings":";;;;;;AAMA,iBAAe;;;KAAA;uBAAA;WACJ;cACG;kBACIA,MADJ;qBAEO;SAHV;wBAKa;kBACNC,OADM;qBAEH;;KARN;QAAA,kBAWJ;eACI;kBACG,IADH;iBAEG,IAFH;;iBAIC;mBACE,IADF;mBAEE;aANH;;kBASE;uBACK,IADL;wBAEM;aAXR;;oBAcI;uBACG,IADH;wBAEI;aAhBR;oBAkBK;0BACM;;SAnBlB;KAZO;;WAmCJ;YAAA,gBACEC,GADF,EACO;iBACDC,GAAL,CAASC,KAAT,CAAeC,IAAf,GAAsBH,MAAI,IAA1B;SAFD;WAAA,eAICA,GAJD,EAIM;iBACAC,GAAL,CAASC,KAAT,CAAeE,GAAf,GAAqBJ,MAAI,IAAzB;;KAxCG;WAAA,qBA2CD;;;;aAEDK,IAAL,CAAUC,KAAV,GAAkB,KAAKL,GAAL,CAASM,UAAT,CAAoBC,WAAtC;aACKH,IAAL,CAAUI,MAAV,GAAmB,KAAKR,GAAL,CAASM,UAAT,CAAoBG,YAAvC;;aAEKC,MAAL,CAAYL,KAAZ,GAAoB,KAAKL,GAAL,CAASO,WAA7B;aACKG,MAAL,CAAYF,MAAZ,GAAqB,KAAKR,GAAL,CAASS,YAA9B;YACIE,SAAS,KAAKX,GAAL,CAASY,aAAT,CAAuB,UAAvB,IAAmC,KAAKZ,GAAL,CAASY,aAAT,CAAuB,UAAvB,CAAnC,GAAsE,KAAKZ,GAAxF;;YAEG,KAAKa,cAAR,EAAuB;iBACdb,GAAL,CAASC,KAAT,CAAeC,IAAf,GAAsBY,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAe,KAAKZ,IAAL,CAAUC,KAAV,GAAkB,KAAKK,MAAL,CAAYL,KAA7C,CAAX,IAAgE,IAAtF;iBACKL,GAAL,CAASC,KAAT,CAAeE,GAAf,GAAqBW,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAe,KAAKZ,IAAL,CAAUI,MAAV,GAAmB,KAAKE,MAAL,CAAYF,MAA9C,CAAX,IAAkE,IAAvF;;aAECN,IAAL,GAAY,KAAKF,GAAL,CAASiB,UAArB;aACKd,GAAL,GAAW,KAAKH,GAAL,CAASkB,SAApB;eACOC,gBAAP,CAAwB,WAAxB,EAAoC,UAACC,CAAD,EAAK;kBAChCC,KAAL,CAAW,WAAX,EAAuBD,CAAvB;kBACKE,MAAL,CAAYC,QAAZ,GAAuB,IAAvB;kBACKC,GAAL,CAASC,CAAT,GAAaL,EAAEM,OAAF,GAAY,MAAKxB,IAA9B;kBACKsB,GAAL,CAASG,CAAT,GAAaP,EAAEQ,OAAF,GAAY,MAAKzB,GAA9B;SAJJ;iBAMSgB,gBAAT,CAA0B,WAA1B,EAAsC,KAAKU,iBAA3C;iBACSV,gBAAT,CAA0B,SAA1B,EAAoC,KAAKW,eAAzC;KAjEO;;aAmEF;yBAAA,6BACaV,CADb,EACgB;cACfW,cAAF;gBACG,KAAKT,MAAL,CAAYC,QAAZ,IAAsB,IAAzB,EAA8B;qBACrBF,KAAL,CAAW,UAAX,EAAsBD,CAAtB;oBACG,KAAKY,IAAL,IAAa,GAAb,IAAoB,KAAKA,IAAL,IAAa,MAApC,EAA2C;wBACnC9B,OAAQkB,EAAEM,OAAF,GAAU,KAAKF,GAAL,CAASC,CAApB,GAAuB,CAAvB,GAA0BL,EAAEM,OAAF,GAAU,KAAKF,GAAL,CAASC,CAA7C,GAAgD,CAA3D;wBACGvB,OAAM,KAAKE,IAAL,CAAUC,KAAV,GAAgB,KAAKK,MAAL,CAAYL,KAArC,EAA4C;+BACjC,KAAKD,IAAL,CAAUC,KAAV,GAAgB,KAAKK,MAAL,CAAYL,KAAnC;;yBAECH,IAAL,GAAYA,IAAZ;;oBAED,KAAK8B,IAAL,IAAa,GAAb,IAAoB,KAAKA,IAAL,IAAa,MAApC,EAA2C;wBACnC7B,MAAOiB,EAAEQ,OAAF,GAAU,KAAKJ,GAAL,CAASG,CAApB,GAAuB,CAAvB,GAA0BP,EAAEQ,OAAF,GAAU,KAAKJ,GAAL,CAASG,CAA7C,GAAgD,CAA1D;wBACGxB,MAAK,KAAKC,IAAL,CAAUI,MAAV,GAAiB,KAAKE,MAAL,CAAYF,MAArC,EAA6C;8BACnC,KAAKJ,IAAL,CAAUI,MAAV,GAAiB,KAAKE,MAAL,CAAYF,MAAnC;;yBAECL,GAAL,GAAWA,GAAX;;;SAjBP;uBAAA,2BAqBWiB,CArBX,EAqBc;gBACZ,KAAKE,MAAL,CAAYC,QAAZ,IAAsB,IAAzB,EAA8B;qBACrBF,KAAL,CAAW,SAAX,EAAqBD,CAArB;;iBAECE,MAAL,CAAYC,QAAZ,GAAuB,KAAvB;;KA5FG;iBAAA,2BA+FK;iBACHU,mBAAT,CAA6B,WAA7B,EAAyC,KAAKJ,iBAA9C;iBACSI,mBAAT,CAA6B,SAA7B,EAAuC,KAAKH,eAA5C;;CAjGR;;ACLA,IAAII,QAAQ,KAAZ;;AAEA,gBAAe,UAAUC,GAAV,EAAe;QACtBD,KAAJ,EAAW;YACH,IAAR;QACIE,SAAJ,CAAc,YAAd,EAA4BC,UAA5B;;;ACJJ,IAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,OAAOH,GAA5C,EAAiD;cACrCG,OAAOH,GAAf;CAGJ;;;;"}