{"version":3,"file":"vue-xdraggable.min.js","sources":["../src/xdraggable.vue","../src/install.js","../src/index.js"],"sourcesContent":["<template>\n    <div>\n        <slot ref=\"drag\"></slot>\n    </div>\n</template>\n<script>\nexport default {\n    props: {\n        move: {\n            type: String,\n            default: 'both'\n        },\n        randomPosition: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            left: null,\n            top:  null,\n            //元素到鼠标的距离\n            pos:{\n                x:null,\n                y:null\n            },\n            //桌子的宽高\n            desk:{\n                width:null,\n                height:null\n            },\n            //移动物体的宽高\n            animal:{\n                width:null,\n                height:null\n            },\n            status: {\n                dragging :false\n            }\n        };\n    },\n    watch: {\n        left(val) {\n            this.$el.style.left = val+'px';\n        },\n        top(val) {\n            this.$el.style.top = val+'px';\n        }\n    },\n    mounted() {\n        //初始化桌子的宽高\n        this.desk.width = this.$el.parentNode.clientWidth;\n        this.desk.height = this.$el.parentNode.clientHeight;\n        //初始化移动物的宽高\n        this.animal.width = this.$el.clientWidth;\n        this.animal.height = this.$el.clientHeight;\n        var handle = this.$el.querySelector('[handle]')?this.$el.querySelector('[handle]'):this.$el;\n        //初始化随机位置\n        if(this.randomPosition){\n            this.$el.style.left = Math.floor(Math.random()*(this.desk.width - this.animal.width))+'px';\n            this.$el.style.top = Math.floor(Math.random()*(this.desk.height - this.animal.height))+'px';\n        }\n        this.left = this.$el.offsetLeft;\n        this.top = this.$el.offsetTop;\n        handle.addEventListener('mousedown',(e)=>{\n            this.$emit('dragstart',e);\n            this.status.dragging = true;\n            this.pos.x = e.clientX - this.left;\n            this.pos.y = e.clientY - this.top;\n        });\n        document.addEventListener('mousemove',this.mousemoveObserver);\n        document.addEventListener('mouseup',this.mouseupObserver);\n    },\n    methods: {\n        mousemoveObserver(e) {\n            e.preventDefault();\n            if(this.status.dragging==true){\n                this.$emit('dragging',e);\n                if(this.move == 'x' || this.move == 'both'){\n                    var left = (e.clientX-this.pos.x)>0?(e.clientX-this.pos.x):0;\n                    if(left>(this.desk.width-this.animal.width)){\n                        left = this.desk.width-this.animal.width;\n                    }\n                    this.left = left;\n                }\n                if(this.move == 'y' || this.move == 'both'){\n                    var top = (e.clientY-this.pos.y)>0?(e.clientY-this.pos.y):0;\n                    if(top>(this.desk.height-this.animal.height)){\n                        top = this.desk.height-this.animal.height;\n                    }\n                    this.top = top;\n                }\n            }\n        },\n        mouseupObserver(e) {\n            if(this.status.dragging==true){\n                this.$emit('dragend',e);\n            }\n            this.status.dragging = false;\n        }\n    },\n    beforeDestroy() {\n        document.removeEventListener('mousemove',this.mousemoveObserver);\n        document.removeEventListener('mouseup',this.mouseupObserver);\n    }\n};\n</script>\n<style>\n\n</style>\n\n","import Xdraggable from './xdraggable.vue';\nvar state = false;\n\nexport default function (Vue) {\n    if (state) return;\n    state = true;\n    Vue.component('xdraggable', Xdraggable);\n}","import install from './install';\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n    install(window.Vue);\r\n}\r\n\r\nexport default install;"],"names":["String","Boolean","val","$el","style","left","top","desk","width","this","parentNode","clientWidth","height","clientHeight","animal","handle","querySelector","randomPosition","Math","floor","random","offsetLeft","offsetTop","addEventListener","e","$emit","status","dragging","pos","x","clientX","_this","y","clientY","mousemoveObserver","mouseupObserver","preventDefault","move","removeEventListener","state","Vue","component","Xdraggable","window"],"mappings":"yLAMA,8IAGkBA,eACG,6BAGHC,iBACG,gCAKH,SACA,YAGA,OACA,kBAII,YACC,oBAID,YACC,wBAGG,0BAKbC,QACIC,IAAIC,MAAMC,KAAOH,EAAI,mBAE1BA,QACKC,IAAIC,MAAME,IAAMJ,EAAI,0CAKxBK,KAAKC,MAAQC,KAAKN,IAAIO,WAAWC,iBACjCJ,KAAKK,OAASH,KAAKN,IAAIO,WAAWG,kBAElCC,OAAON,MAAQC,KAAKN,IAAIQ,iBACxBG,OAAOF,OAASH,KAAKN,IAAIU,iBAC1BE,EAASN,KAAKN,IAAIa,cAAc,YAAYP,KAAKN,IAAIa,cAAc,YAAYP,KAAKN,IAErFM,KAAKQ,sBACCd,IAAIC,MAAMC,KAAOa,KAAKC,MAAMD,KAAKE,UAAUX,KAAKF,KAAKC,MAAQC,KAAKK,OAAON,QAAQ,UACjFL,IAAIC,MAAME,IAAMY,KAAKC,MAAMD,KAAKE,UAAUX,KAAKF,KAAKK,OAASH,KAAKK,OAAOF,SAAS,WAEtFP,KAAOI,KAAKN,IAAIkB,gBAChBf,IAAMG,KAAKN,IAAImB,YACbC,iBAAiB,YAAY,SAACC,KAC5BC,MAAM,YAAYD,KAClBE,OAAOC,UAAW,IAClBC,IAAIC,EAAIL,EAAEM,QAAUC,EAAK1B,OACzBuB,IAAII,EAAIR,EAAES,QAAUF,EAAKzB,eAEzBiB,iBAAiB,YAAYd,KAAKyB,4BAClCX,iBAAiB,UAAUd,KAAK0B,sDAGvBX,QACZY,iBACuB,GAAtB3B,KAAKiB,OAAOC,SAAe,SACrBF,MAAM,WAAWD,GACN,KAAbf,KAAK4B,MAA4B,QAAb5B,KAAK4B,KAAe,KACnChC,EAAQmB,EAAEM,QAAQrB,KAAKmB,IAAIC,EAAG,EAAGL,EAAEM,QAAQrB,KAAKmB,IAAIC,EAAG,EACxDxB,EAAMI,KAAKF,KAAKC,MAAMC,KAAKK,OAAON,UAC1BC,KAAKF,KAAKC,MAAMC,KAAKK,OAAON,YAElCH,KAAOA,KAEA,KAAbI,KAAK4B,MAA4B,QAAb5B,KAAK4B,KAAe,KACnC/B,EAAOkB,EAAES,QAAQxB,KAAKmB,IAAII,EAAG,EAAGR,EAAES,QAAQxB,KAAKmB,IAAII,EAAG,EACvD1B,EAAKG,KAAKF,KAAKK,OAAOH,KAAKK,OAAOF,WAC3BH,KAAKF,KAAKK,OAAOH,KAAKK,OAAOF,aAElCN,IAAMA,8BAIPkB,GACa,GAAtBf,KAAKiB,OAAOC,eACNF,MAAM,UAAUD,QAEpBE,OAAOC,UAAW,sCAIlBW,oBAAoB,YAAY7B,KAAKyB,4BACrCI,oBAAoB,UAAU7B,KAAK0B,mBCtGhDI,GAAQ,IAEG,SAAUC,GACjBD,OACI,IACJE,UAAU,aAAcC,WCJV,oBAAXC,QAA0BA,OAAOH,OAChCG,OAAOH"}